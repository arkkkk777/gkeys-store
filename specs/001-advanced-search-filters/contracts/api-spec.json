{
  "openapi": "3.0.0",
  "info": {
    "title": "GKEYS Store API - Advanced Search",
    "version": "1.0.0",
    "description": "API endpoints for advanced search and filtering features"
  },
  "paths": {
    "/api/games/autocomplete": {
      "get": {
        "summary": "Get game autocomplete suggestions",
        "description": "Returns list of game suggestions based on search query for autocomplete functionality",
        "operationId": "getGameAutocomplete",
        "tags": ["Games", "Search"],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "description": "Search query (minimum 2 characters)",
            "schema": {
              "type": "string",
              "minLength": 2,
              "maxLength": 200
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "description": "Maximum number of results to return",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 20,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response with autocomplete suggestions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AutocompleteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid query parameter",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/games": {
      "get": {
        "summary": "Get games with advanced filters",
        "description": "Returns paginated list of games with support for extended filtering options",
        "operationId": "getGames",
        "tags": ["Games"],
        "parameters": [
          {
            "name": "search",
            "in": "query",
            "required": false,
            "description": "Search query text",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "ratingMin",
            "in": "query",
            "required": false,
            "description": "Minimum rating (0-100)",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            }
          },
          {
            "name": "releaseDateFrom",
            "in": "query",
            "required": false,
            "description": "Start year for release date filter",
            "schema": {
              "type": "integer",
              "minimum": 1900
            }
          },
          {
            "name": "releaseDateTo",
            "in": "query",
            "required": false,
            "description": "End year for release date filter",
            "schema": {
              "type": "integer",
              "minimum": 1900
            }
          },
          {
            "name": "languages",
            "in": "query",
            "required": false,
            "description": "Array of language codes (ISO 639-1)",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^[a-z]{2}$"
              }
            },
            "style": "form",
            "explode": true
          },
          {
            "name": "platforms",
            "in": "query",
            "required": false,
            "description": "Array of platform slugs",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "style": "form",
            "explode": true
          },
          {
            "name": "genres",
            "in": "query",
            "required": false,
            "description": "Array of genre slugs",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "style": "form",
            "explode": true
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "description": "Page number",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "required": false,
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 36
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response with paginated games",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedGamesResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid filter parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "SearchSuggestion": {
        "type": "object",
        "required": ["id", "title", "image", "slug", "relevanceScore"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Game ID"
          },
          "title": {
            "type": "string",
            "description": "Game title",
            "maxLength": 200
          },
          "image": {
            "type": "string",
            "format": "uri",
            "description": "Thumbnail image URL"
          },
          "slug": {
            "type": "string",
            "description": "Game slug for navigation"
          },
          "relevanceScore": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Calculated relevance score"
          }
        }
      },
      "AutocompleteResponse": {
        "type": "object",
        "required": ["suggestions"],
        "properties": {
          "suggestions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SearchSuggestion"
            }
          }
        }
      },
      "Game": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "originalPrice": {
            "type": "number",
            "nullable": true
          },
          "discount": {
            "type": "integer",
            "nullable": true
          },
          "image": {
            "type": "string",
            "format": "uri"
          },
          "slug": {
            "type": "string"
          },
          "ratingCritic": {
            "type": "integer",
            "minimum": 0,
            "maximum": 100,
            "nullable": true
          },
          "ratingUser": {
            "type": "integer",
            "minimum": 0,
            "maximum": 100,
            "nullable": true
          },
          "releaseDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "languages": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "platforms": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "slug": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                }
              }
            }
          },
          "genres": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "slug": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "PaginatedGamesResponse": {
        "type": "object",
        "required": ["data", "total", "page", "pageSize", "totalPages"],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Game"
            }
          },
          "total": {
            "type": "integer",
            "description": "Total number of games matching filters"
          },
          "page": {
            "type": "integer",
            "description": "Current page number"
          },
          "pageSize": {
            "type": "integer",
            "description": "Number of items per page"
          },
          "totalPages": {
            "type": "integer",
            "description": "Total number of pages"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "required": ["error"],
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message"
          },
          "code": {
            "type": "string",
            "description": "Error code"
          },
          "details": {
            "type": "object",
            "description": "Additional error details"
          }
        }
      }
    }
  }
}
